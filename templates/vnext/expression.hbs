{{~#compare node "===" "IdentifierExpression"}}{{& prefix}}{{& replace name (toRegex "(-|\.| )+" "g") "_"}}{{& suffix}}{{/compare~}}

{{~#compare node "===" "ObjectExpression"}}
    {
    {{#each properties}} {{>declaration .}}{{/each}}
    }
{{/compare~}}

{{~#compare node "===" "ArrayExpression"}}
    ({{~#elements~}}{{~>expression}}{{~/elements~}})[]
{{/compare~}}

{{~#compare node "===" "OmitExpression"}}
{{#if omit}}
    & Omit<{{#elements}}{{> expression}}{{/elements}},
    {{#forEach omit}}
    {{>expression . prefix="'" suffix="'"}} {{#unless isLast}}|{{/unless}}
    {{/forEach}}
    >
{{/if}}
{{/compare~}}

{{~#compare node "===" "CompositeExpression"}}
    {{#if elements}}{{#forEach elements}}{{>expression .}}{{#unless isLast}}&{{/unless}}{{/forEach}}{{/if}}
{{/compare~}}

{{~#compare node "===" "UnionExpression"}}
    {{#if elements}}{{#forEach elements}}{{>expression .}}{{#unless isLast}}|{{/unless}}{{/forEach}}{{/if}}
{{/compare~}}

{{~#compare node "===" "ResponseExpression"}}
{    
    {{#if bodies}}
    {{#forEach bodies}}{{>expression . suffix=./suffix prefix=./prefix}}{{#unless isLast}}|{{/unless}}{{/forEach}}
    {{/if}}
}
{{/compare~}}

{{~#compare node "===" "OperationResponseExpression"}}
{$status: {{statusCode}} } & {{>expression response}}
{{/compare~}}

{{~#compare node "===" "RequestExpression"}}
{{#if bodies}}{{#forEach bodies}}{{>expression . suffix=./suffix prefix=./prefix}}{{#unless isLast}}|{{/unless}}{{/forEach}}{{/if}}
{{/compare~}}

{{~#compare node "===" "MediaExpression"}}
    {{~#inArray (toArray "application/json" "application/x-www-form-urlencoded" "multipart/form-data" ) mediaType}}
    {{#body}}{{> expression suffix=./suffix prefix=./prefix}}{{/body}}
    {{else}}
    {{log "Unsupported media type" mediaType level="warn"}}
    {{/inArray~}} 
{{/compare~}}

{{~#compare node "===" "MediaResponseExpression"}}
    {{~#compare mediaType "===" "application/pdf"}}
      {{#body}}$body: Readable{{/body}}
      {{#headers}}$headers: {{> expression suffix=./suffix prefix=./prefix}}{{/headers}}
    {{else}}
      {{~#inArray (toArray "application/json" "multipart/form-data") mediaType}}
        {{#body}}$body: {{> expression suffix=./suffix prefix=./prefix}}{{/body}}
        {{#headers}}$headers: {{> expression suffix=./suffix prefix=./prefix}}{{/headers}}
      {{else}}
        {{log "Unsupported response media type" mediaType level="warn"}}
      {{/inArray~}}
    {{/compare}}
{{/compare~}}

{{~#compare node "===" "ReferenceExpression"}}{{& prefix}}{{& resolveReference .}}{{& suffix}}{{/compare~}}

{{~#compare node "===" "LiteralExpression"}}{{#if enum}}"{{& join enum "\"|\""}}"{{else}}{{& replace value "integer" "number"}}{{/if}}{{/compare~}}

{{~#compare node "===" "TodoExpression"}}{{log "TODO expression" what level="warn"}}{{/compare~}}



